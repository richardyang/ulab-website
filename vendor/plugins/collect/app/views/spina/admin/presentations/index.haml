%header#header
  = render partial: 'spina/admin/shared/breadcrumbs'

  #header_actions
    = link_to spina.new_admin_presentation_path, class: 'button button-primary', style: 'margin-right: 0' do
      = icon('plus')
      = t('spina.presentations.new')

.well
  .table-container
    %table.table
      %thead
        %tr
          %th= Spina::Presentation.human_attribute_name :title
          %th= Spina::Presentation.human_attribute_name :start_time
          %th= Spina::Presentation.human_attribute_name :presenters
          %th= Spina::Presentation.human_attribute_name :conference
          %th

      %tbody
        - if @presentations.any?
          - @presentations.each do |presentation|
            %tr
              %td= link_to presentation.title, spina.edit_admin_presentation_path(presentation)
              %td= l(presentation.start_datetime, format: :short) unless presentation.start_datetime.blank?
              %td
                - presentation.delegates.each do |delegate|
                  = link_to delegate.full_name_and_institution, spina.edit_admin_delegate_path(delegate)
                  %br
              %td= link_to presentation.conference.institution_and_year, spina.edit_admin_conference_path(presentation.conference)
              %td.align-right
                = link_to spina.edit_admin_presentation_path(presentation), class: 'button button-small button-link' do
                  = icon('pencil-outline')
                  = t('spina.edit')

        - else
          %tr
            %td.align-center{ colspan: 100 }
              %em= t('spina.presentations.no_presentations')
